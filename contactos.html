<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Contactos de Emergencia - SAT Bolivia 2.0</title>
<meta name="theme-color" content="#00B4D4">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="description" content="Sistema de Contactos de Emergencia SAT Bolivia 2.0 - N√∫meros oficiales de emergencia">
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22 fill=%22%2300B4D4%22>üìû</text></svg>">
<link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22 fill=%22%2300B4D4%22>üìû</text></svg>">

<link rel="manifest" href="./manifest.json">


<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@700;800;900&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  :root {
    --primary: #00B4D4;
    --primary-dark: #0096B4;
    --primary-light: #5AC8E8;
    --secondary: #80D0FF;
    --secondary-dark: #5AB8E0;
    --accent: #FF6B8B;
    --accent-dark: #E05070;
    --success: #4CD964;
    --success-dark: #38C050;
    --warning: #FFB347;
    --warning-dark: #E09B3D;
    --danger: #FF6B6B;
    --danger-dark: #E05050;
    --dark: #0A1E32;
    --darker: #051525;
    --dark-light: #1E3A5F;
    --light: #F0F9FF;
    --light-dark: #D1E8F2;
    --gray: #7A8AA3;
    --gray-dark: #5A6A83;
    --glass: rgba(255, 255, 255, 0.1);
    --glass-light: rgba(255, 255, 255, 0.15);
    --glass-border: rgba(0, 180, 212, 0.2);
    --neon-glow: 0 0 20px rgba(0, 180, 212, 0.3), 0 0 40px rgba(0, 180, 212, 0.15);
    --neon-glow-danger: 0 0 20px rgba(255, 107, 107, 0.3), 0 0 40px rgba(255, 107, 107, 0.15);
    --shadow-lg: 0 20px 60px rgba(0, 20, 40, 0.2);
    --shadow-xl: 0 30px 80px rgba(0, 20, 40, 0.25);
    --transition-smooth: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    --transition-fast: all 0.2s ease;
    --border-radius: 20px;
    --border-radius-lg: 30px;
    --border-radius-sm: 12px;
  }
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html {
    scroll-behavior: smooth;
    font-size: 16px;
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #F0F9FF 0%, #E6F7FF 100%);
    color: var(--dark);
    line-height: 1.6;
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
  }

  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
      radial-gradient(circle at 20% 30%, rgba(0, 180, 212, 0.08) 0%, transparent 50%),
      radial-gradient(circle at 80% 70%, rgba(255, 107, 139, 0.04) 0%, transparent 50%),
      radial-gradient(circle at 40% 80%, rgba(128, 208, 255, 0.06) 0%, transparent 50%);
    z-index: -1;
    animation: backgroundPulse 20s ease-in-out infinite alternate;
  }

  @keyframes backgroundPulse {
    0% { opacity: 0.6; }
    100% { opacity: 0.8; }
  }
  .header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(0, 180, 212, 0.1);
    padding: 1rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 1000;
    box-shadow: 0 4px 30px rgba(0, 20, 40, 0.1);
    transition: var(--transition-smooth);
  }

  .header.scrolled {
    padding: 0.75rem 2rem;
    background: rgba(255, 255, 255, 0.98);
  }

  .logo-container {
    display: flex;
    align-items: center;
    gap: 1rem;
    cursor: pointer;
    transition: var(--transition-smooth);
  }

  .logo-container:hover {
    transform: translateX(5px);
  }

  .logo-img {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    box-shadow: var(--neon-glow);
    animation: logoFloat 6s ease-in-out infinite;
    color: white;
  }

  @keyframes logoFloat {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    33% { transform: translateY(-5px) rotate(2deg); }
    66% { transform: translateY(3px) rotate(-1deg); }
  }

  .logo-text {
    display: flex;
    flex-direction: column;
  }

  .logo-title {
    font-family: 'Poppins', sans-serif;
    font-weight: 800;
    font-size: 1.5rem;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }

  .logo-subtitle {
    font-size: 0.8rem;
    color: var(--gray);
    font-weight: 500;
    letter-spacing: 1px;
    text-transform: uppercase;
  }
  .nav-menu {
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }

  .nav-link {
    color: var(--dark);
    text-decoration: none;
    padding: 0.75rem 1.5rem;
    border-radius: 50px;
    transition: var(--transition-smooth);
    font-weight: 500;
    position: relative;
    overflow: hidden;
    border: 1px solid transparent;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.95rem;
  }

  .nav-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(0, 180, 212, 0.1), transparent);
    transition: left 0.6s ease;
  }

  .nav-link:hover::before {
    left: 100%;
  }

  .nav-link:hover {
    border-color: var(--primary);
    box-shadow: var(--neon-glow);
    transform: translateY(-2px);
    background: var(--glass-light);
  }

  .nav-link.active {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;
    box-shadow: var(--neon-glow);
    border: none;
  }

  .nav-link i {
    font-size: 1.1rem;
  }
  .main {
    padding: 8rem 2rem 3rem;
    max-width: 1400px;
    margin: 0 auto;
  }

  .page-title {
    text-align: center;
    color: var(--dark);
    margin-bottom: 1rem;
    font-size: 2.5rem;
    font-weight: 800;
    position: relative;
    font-family: 'Poppins', sans-serif;
  }

  .page-title::after {
    content: '';
    display: block;
    width: 100px;
    height: 4px;
    background: linear-gradient(90deg, var(--primary), var(--secondary));
    margin: 1rem auto;
    border-radius: 2px;
    box-shadow: var(--neon-glow);
  }

  .page-subtitle {
    text-align: center;
    color: var(--gray);
    font-size: 1.1rem;
    margin-bottom: 3rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .last-update {
    text-align: center;
    color: var(--gray);
    font-size: 0.95rem;
    margin-bottom: 3rem;
  }

  .last-update .highlight {
    color: var(--primary);
    font-weight: 600;
  }

  .stats-overview {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
    margin-bottom: 3rem;
  }

  .stat-card {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    border-radius: var(--border-radius);
    padding: 2rem;
    text-align: center;
    transition: var(--transition-smooth);
    position: relative;
    overflow: hidden;
  }

  .stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background: linear-gradient(90deg, var(--primary), var(--secondary));
  }

  .stat-card:hover {
    transform: translateY(-5px);
    border-color: var(--primary);
    box-shadow: var(--shadow-lg);
    background: white;
  }

  .stat-icon {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    transition: var(--transition-smooth);
    filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
  }

  .stat-card:hover .stat-icon {
    transform: scale(1.1) rotate(5deg);
  }

  .stat-number {
    font-size: 2.5rem;
    font-weight: 900;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    margin-bottom: 0.5rem;
    display: block;
    line-height: 1;
  }

  .stat-label {
    font-size: 0.9rem;
    color: var(--gray);
    text-transform: uppercase;
    letter-spacing: 1px;
    font-weight: 600;
  }
  .quick-dial-section {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    border-radius: var(--border-radius-lg);
    padding: 2.5rem;
    box-shadow: var(--shadow-lg);
    margin-bottom: 3rem;
    position: relative;
    overflow: hidden;
  }

  .quick-dial-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 6px;
    background: linear-gradient(90deg, var(--primary), var(--secondary));
  }

  .quick-dial-title {
    color: var(--dark);
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    text-align: center;
    font-family: 'Poppins', sans-serif;
  }

  .quick-dial-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 1.5rem;
  }

  .quick-dial-item {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;
    padding: 1.8rem;
    border-radius: var(--border-radius);
    text-align: center;
    transition: var(--transition-smooth);
    cursor: pointer;
    position: relative;
    overflow: hidden;
    box-shadow: 0 6px 20px rgba(0, 180, 212, 0.4);
  }

  .quick-dial-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.6s ease;
  }

  .quick-dial-item:hover::before {
    left: 100%;
  }

  .quick-dial-item:hover {
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 12px 30px rgba(0, 180, 212, 0.6);
  }

  .quick-dial-item.emergency {
    background: linear-gradient(135deg, var(--danger), var(--accent-dark));
    box-shadow: var(--neon-glow-danger);
  }

  .quick-dial-item.emergency:hover {
    box-shadow: 0 12px 30px rgba(255, 107, 107, 0.6);
  }

  .quick-dial-icon {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
  }

  .quick-dial-service {
    font-weight: 600;
    margin-bottom: 0.5rem;
    font-size: 1.1rem;
  }

  .quick-dial-number {
    font-size: 1.5rem;
    font-weight: 800;
    letter-spacing: 1px;
  }
  .controls-container {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    border-radius: var(--border-radius-lg);
    padding: 2rem;
    box-shadow: var(--shadow-lg);
    margin-bottom: 3rem;
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
    align-items: center;
    justify-content: space-between;
  }

  .search-group {
    display: flex;
    gap: 1rem;
    align-items: center;
    flex: 1;
    max-width: 500px;
  }

  .search-input {
    padding: 0.9rem 1.2rem;
    padding-left: 3rem;
    border: 1px solid var(--glass-border);
    border-radius: var(--border-radius-sm);
    background: rgba(255, 255, 255, 0.9);
    font-size: 1rem;
    width: 100%;
    color: var(--dark);
    transition: var(--transition-smooth);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%237A8AA3' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='m21 21-4.35-4.35'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: 1rem center;
    background-size: 20px;
  }

  .search-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: var(--neon-glow);
    background: white;
  }

  .filter-group {
    display: flex;
    gap: 1rem;
    align-items: center;
  }

  .filter-select {
    padding: 0.9rem 1.2rem;
    border: 1px solid var(--glass-border);
    border-radius: var(--border-radius-sm);
    background: rgba(255, 255, 255, 0.9);
    font-size: 0.95rem;
    color: var(--dark);
    transition: var(--transition-smooth);
    min-width: 180px;
  }

  .filter-select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: var(--neon-glow);
    background: white;
  }

  .quick-actions {
    display: flex;
    gap: 0.8rem;
    flex-wrap: wrap;
  }

  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.9rem 1.8rem;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;
    border: none;
    border-radius: var(--border-radius-sm);
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: var(--transition-smooth);
    font-family: 'Inter', sans-serif;
    text-decoration: none;
    box-shadow: 0 4px 15px rgba(0, 180, 212, 0.3);
    position: relative;
    overflow: hidden;
  }

  .btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s ease;
  }

  .btn:hover::before {
    left: 100%;
  }

  .btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0, 180, 212, 0.4);
  }

  .btn-secondary {
    background: rgba(255, 255, 255, 0.9);
    color: var(--dark);
    border: 1px solid var(--glass-border);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  }

  .btn-secondary:hover {
    background: white;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }

  .btn-danger {
    background: linear-gradient(135deg, var(--danger), var(--accent-dark));
    box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
  }

  .btn-danger:hover {
    box-shadow: var(--neon-glow-danger);
  }
  .contacts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
  }

  .department-card {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    border-radius: var(--border-radius-lg);
    padding: 2rem;
    box-shadow: var(--shadow-lg);
    transition: var(--transition-smooth);
    cursor: pointer;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  .department-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 6px;
    background: linear-gradient(90deg, var(--primary), var(--secondary));
  }

  .department-card:hover {
    transform: translateY(-10px) scale(1.03);
    border-color: var(--primary);
    box-shadow: 0 25px 50px rgba(0, 180, 212, 0.2);
    background: white;
  }

  .department-card.active {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0, 180, 212, 0.3);
  }

  .card-header {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    margin-bottom: 1rem;
    text-align: left;
  }

  .flag-container {
    width: 80px;
    height: 60px;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    border: 2px solid var(--glass-border);
    transition: var(--transition-smooth);
    flex-shrink: 0;
  }

  .department-card:hover .flag-container {
    transform: scale(1.1);
  }

  .flag {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .department-info {
    flex: 1;
  }

  .department-card h3 {
    margin: 0 0 0.3rem 0;
    color: var(--dark);
    font-size: 1.4rem;
    font-weight: 700;
    font-family: 'Poppins', sans-serif;
  }

  .department-stats {
    display: flex;
    gap: 1rem;
    font-size: 0.8rem;
    color: var(--gray);
  }

  .stat {
    display: flex;
    align-items: center;
    gap: 0.3rem;
  }

  .contact-info {
    max-height: 0;
    overflow: hidden;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    text-align: left;
    margin-top: 0;
  }

  .contact-info.active {
    max-height: 2000px;
    margin-top: 1.5rem;
  }

  .contact-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.8rem 0;
    border-bottom: 1px solid var(--glass-border);
    transition: var(--transition-fast);
    position: relative;
  }

  .contact-item:last-child {
    border-bottom: none;
  }

  .contact-item:hover {
    background: rgba(240, 249, 255, 0.5);
    border-radius: var(--border-radius-sm);
    padding-left: 1rem;
    padding-right: 1rem;
  }

  .contact-icon {
    width: 45px;
    height: 45px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.3rem;
    flex-shrink: 0;
    background: var(--light-dark);
    border-radius: var(--border-radius-sm);
    transition: var(--transition-smooth);
  }

  .contact-item:hover .contact-icon {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;
    transform: scale(1.1);
  }

  .contact-details {
    flex: 1;
  }

  .contact-service {
    font-weight: 600;
    color: var(--dark);
    font-size: 0.95rem;
    margin-bottom: 0.2rem;
  }

  .contact-number {
    color: var(--primary);
    text-decoration: none;
    font-weight: 600;
    font-size: 1.1rem;
    transition: var(--transition-smooth);
    display: block;
  }

  .contact-number:hover {
    color: var(--primary-dark);
    transform: translateX(5px);
  }

  .contact-actions {
    display: flex;
    gap: 0.5rem;
    opacity: 0;
    transition: var(--transition-smooth);
  }

  .contact-item:hover .contact-actions {
    opacity: 1;
  }

  .action-btn {
    width: 38px;
    height: 38px;
    border: none;
    border-radius: var(--border-radius-sm);
    background: var(--light-dark);
    color: var(--gray);
    cursor: pointer;
    transition: var(--transition-smooth);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
  }

  .action-btn:hover {
    background: var(--primary);
    color: white;
    transform: scale(1.1);
  }

  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(5, 21, 37, 0.95);
    backdrop-filter: blur(20px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    padding: 1rem;
  }

  .modal-overlay.active {
    opacity: 1;
    visibility: visible;
  }

  .modal-content {
    background: rgba(255, 255, 255, 0.95);
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--glass-border);
    width: 90%;
    max-width: 500px;
    max-height: 90vh;
    overflow: hidden;
    box-shadow: var(--shadow-xl);
    transform: scale(0.9);
    transition: transform 0.3s ease;
  }

  .modal-overlay.active .modal-content {
    transform: scale(1);
  }

  .modal-header {
    padding: 1.5rem 2rem;
    border-bottom: 1px solid var(--glass-border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;
  }

  .modal-header h3 {
    margin: 0;
    font-size: 1.4rem;
    font-family: 'Poppins', sans-serif;
  }

  .modal-close {
    background: none;
    border: none;
    color: white;
    font-size: 1.8rem;
    cursor: pointer;
    padding: 0;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: var(--transition-fast);
  }

  .modal-close:hover {
    background: rgba(255, 255, 255, 0.1);
  }

  .modal-body {
    padding: 2rem;
    text-align: center;
  }

  .modal-service {
    color: var(--dark);
    font-size: 1.1rem;
    margin-bottom: 1rem;
  }

  .modal-number {
    font-size: 2.2rem;
    color: var(--primary);
    font-weight: 800;
    margin: 1rem 0;
    letter-spacing: 1px;
  }

  .call-options {
    display: flex;
    gap: 1rem;
    margin-top: 1.5rem;
  }

  .call-btn {
    flex: 1;
    padding: 1rem;
    border: none;
    border-radius: var(--border-radius-sm);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-smooth);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    position: relative;
    overflow: hidden;
  }

  .call-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.6s ease;
  }

  .call-btn:hover::before {
    left: 100%;
  }

  .call-primary {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;
    box-shadow: 0 4px 15px rgba(0, 180, 212, 0.4);
  }

  .call-secondary {
    background: var(--light);
    color: var(--dark);
    border: 1px solid var(--glass-border);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  }

  .call-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0, 180, 212, 0.6);
  }
  .emergency-btn {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    width: 70px;
    height: 70px;
    background: linear-gradient(135deg, var(--danger), var(--accent-dark));
    border: none;
    border-radius: 50%;
    font-size: 1.8rem;
    color: white;
    cursor: pointer;
    z-index: 1001;
    box-shadow: var(--neon-glow-danger);
    transition: var(--transition-smooth);
    display: flex;
    align-items: center;
    justify-content: center;
    animation: emergencyPulse 2s infinite;
  }

  @keyframes emergencyPulse {
    0%, 100% { 
      transform: scale(1);
      box-shadow: 0 10px 30px rgba(255, 107, 107, 0.3);
    }
    50% { 
      transform: scale(1.1);
      box-shadow: 0 15px 40px rgba(255, 107, 107, 0.4), 0 0 60px rgba(255, 107, 107, 0.3);
    }
  }

  .emergency-btn:hover {
    transform: scale(1.2) rotate(15deg);
    animation: none;
  }
  .notification-toast {
    position: fixed;
    top: 100px;
    right: 30px;
    background: rgba(255, 255, 255, 0.95);
    padding: 1.5rem 2rem;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-xl);
    border-left: 4px solid var(--primary);
    z-index: 2001;
    transform: translateX(400px);
    transition: transform 0.3s ease;
    max-width: 300px;
    backdrop-filter: blur(10px);
  }

  .notification-toast.show {
    transform: translateX(0);
  }

  .notification-title {
    font-weight: 700;
    color: var(--dark);
    margin-bottom: 0.5rem;
    font-size: 1.1rem;
  }

  .notification-message {
    color: var(--dark-light);
    font-size: 0.95rem;
  }

  .no-results {
    text-align: center;
    color: var(--gray);
    padding: 3rem;
    font-style: italic;
    display: none;
    grid-column: 1 / -1;
  }
  .footer {
    background: linear-gradient(135deg, #E6F7FF, #D1E8F2);
    border-top: 1px solid rgba(0, 180, 212, 0.2);
    padding: 3rem 2rem 2rem;
    margin-top: 4rem;
  }

  .footer-content {
    max-width: 1400px;
    margin: 0 auto;
    text-align: center;
  }

  .footer p {
    color: var(--dark);
    margin-bottom: 0.5rem;
  }

  .footer p:last-child {
    opacity: 0.8;
    font-size: 0.9rem;
  }
  @media (max-width: 1200px) {
    .page-title { font-size: 2.2rem; }
    .main { padding: 7rem 2rem 3rem; }
    .contacts-grid { grid-template-columns: repeat(2, 1fr); }
  }

  @media (max-width: 992px) {
    .header {
      flex-direction: column;
      gap: 1rem;
      padding: 1rem;
    }
    
    .nav-menu {
      flex-wrap: wrap;
      justify-content: center;
    }
    
    .contacts-grid { grid-template-columns: 1fr; }
    .quick-dial-grid { grid-template-columns: repeat(2, 1fr); }
    .controls-container { flex-direction: column; align-items: stretch; }
    
    .emergency-btn {
      bottom: 1.5rem;
      right: 1.5rem;
      width: 60px;
      height: 60px;
      font-size: 1.6rem;
    }
  }

  @media (max-width: 768px) {
    .page-title { font-size: 2rem; }
    .main { padding: 6rem 1rem 2rem; }
    
    .stats-overview {
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }
    
    .quick-dial-grid { grid-template-columns: 1fr; }
    .search-group, .filter-group { width: 100%; }
    .quick-actions { justify-content: center; }
    
    .card-header {
      flex-direction: column;
      text-align: center;
      gap: 1rem;
    }
    
    .flag-container {
      width: 100px;
      height: 75px;
    }
    
    .modal-content { width: 95%; }
    
    .notification-toast {
      right: 20px;
      left: 20px;
      max-width: none;
    }
  }

  @media (max-width: 480px) {
    .page-title { font-size: 1.8rem; }
    .stats-overview { grid-template-columns: 1fr; }
    .contacts-grid { grid-template-columns: 1fr; }
    .call-options { flex-direction: column; }
  }

  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
  ::-webkit-scrollbar {
    width: 10px;
  }

  ::-webkit-scrollbar-track {
    background: #E6F7FF;
  }

  ::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    border-radius: 5px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, var(--primary-light), var(--secondary-dark));
  }
</style>
</head>
<body>

<header class="header" id="header">
  <div class="logo-container" onclick="window.location.href='index.html'">
    <div class="logo-img">
      <i class="fas fa-shield-alt"></i>
    </div>
    <div class="logo-text">
      <div class="logo-title">SAT Bolivia 2.0</div>
      <div class="logo-subtitle">Contactos de Emergencia</div>
    </div>
  </div>
  
  <nav class="nav-menu">
    <a href="index.html" class="nav-link">
      <i class="fas fa-home"></i> Inicio
    </a>
    <a href="educacion.html" class="nav-link">
      <i class="fas fa-graduation-cap"></i> Educaci√≥n
    </a>
    <a href="denuncias.html" class="nav-link">
      <i class="fas fa-exclamation-triangle"></i> Denuncias
    </a>
    <a href="mapa.html" class="nav-link">
      <i class="fas fa-map-marked-alt"></i> Mapa
    </a>
    <a href="contactos.html" class="nav-link active">
      <i class="fas fa-phone-alt"></i> Contactos
    </a>
  </nav>
</header>

<main class="main">
  <h1 class="page-title">Contactos de Emergencia</h1>
  <p class="page-subtitle">Encuentra r√°pidamente los n√∫meros de emergencia oficiales de cada departamento de Bolivia</p>
  
  <div class="last-update">
    <i class="fas fa-sync-alt"></i> √öltima actualizaci√≥n: 
    <span class="highlight" id="lastUpdateTime">Cargando...</span>
  </div>

  <!-- Stats Overview -->
  <div class="stats-overview">
    <div class="stat-card">
      <div class="stat-icon">üìû</div>
      <span class="stat-number" id="total-contacts">0</span>
      <span class="stat-label">Contactos Totales</span>
    </div>
    <div class="stat-card">
      <div class="stat-icon">üèõÔ∏è</div>
      <span class="stat-number" id="total-departments">0</span>
      <span class="stat-label">Departamentos</span>
    </div>
    <div class="stat-card">
      <div class="stat-icon">üïí</div>
      <span class="stat-number">24/7</span>
      <span class="stat-label">Disponibilidad</span>
    </div>
    <div class="stat-card">
      <div class="stat-icon">üö®</div>
      <span class="stat-number" id="emergency-services">0</span>
      <span class="stat-label">Servicios de Emergencia</span>
    </div>
  </div>
  <section class="quick-dial-section">
    <h2 class="quick-dial-title">Marcado R√°pido de Emergencia</h2>
    <div class="quick-dial-grid">
      <div class="quick-dial-item emergency" data-service="Polic√≠a Nacional" data-number="110">
        <div class="quick-dial-icon">üëÆ</div>
        <div class="quick-dial-service">Polic√≠a Nacional</div>
        <div class="quick-dial-number">110</div>
      </div>
      <div class="quick-dial-item emergency" data-service="Bomberos" data-number="119">
        <div class="quick-dial-icon">üöí</div>
        <div class="quick-dial-service">Bomberos</div>
        <div class="quick-dial-number">119</div>
      </div>
      <div class="quick-dial-item" data-service="Ambulancias" data-number="118">
        <div class="quick-dial-icon">üöë</div>
        <div class="quick-dial-service">Ambulancias</div>
        <div class="quick-dial-number">118</div>
      </div>
      <div class="quick-dial-item" data-service="Servicios de Emergencia" data-number="911">
        <div class="quick-dial-icon">üõ°Ô∏è</div>
        <div class="quick-dial-service">Servicios de Emergencia</div>
        <div class="quick-dial-number">911</div>
      </div>
    </div>
  </section>
  
  <div class="controls-container">
    <div class="search-group">
      <input type="text" class="search-input" id="search-input" placeholder="Buscar departamento o servicio...">
    </div>
    
    <div class="filter-group">
      <select class="filter-select" id="department-filter">
        <option value="all">Todos los departamentos</option>
        <option value="la-paz">La Paz</option>
        <option value="santa-cruz">Santa Cruz</option>
        <option value="cochabamba">Cochabamba</option>
        <option value="oruro">Oruro</option>
        <option value="potosi">Potos√≠</option>
        <option value="chuquisaca">Chuquisaca</option>
        <option value="beni">Beni</option>
        <option value="pando">Pando</option>
        <option value="tarija">Tarija</option>
      </select>
      
      <select class="filter-select" id="service-filter">
        <option value="all">Todos los servicios</option>
        <option value="policia">Polic√≠a</option>
        <option value="bomberos">Bomberos</option>
        <option value="servicios-emergencia">Servicios de Emergencia</option>
        <option value="hospital">Hospital</option>
      </select>
    </div>
    
    <div class="quick-actions">
      <button class="btn btn-secondary" id="expand-all-btn">
        <i class="fas fa-expand-alt"></i> Expandir Todos
      </button>
      <button class="btn btn-secondary" id="collapse-all-btn">
        <i class="fas fa-compress-alt"></i> Contraer Todos
      </button>
      <button class="btn" id="save-contacts-btn">
        <i class="fas fa-download"></i> Guardar Contactos
      </button>
    </div>
  </div>
  <div class="contacts-grid" id="contacts-container">
  </div>

  <div class="no-results" id="noResults">
    No se encontraron contactos que coincidan con tu b√∫squeda.
  </div>
</main>
<div class="modal-overlay" id="call-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 id="modal-title">Realizar Llamada</h3>
      <button class="modal-close" id="modal-close">&times;</button>
    </div>
    <div class="modal-body">
      <p class="modal-service" id="modal-service">Servicio de emergencia</p>
      <h2 class="modal-number" id="modal-number">000-000</h2>
      <div class="call-options">
        <button class="call-btn call-primary" id="call-now">
          <i class="fas fa-phone"></i> Llamar Ahora
        </button>
        <button class="call-btn call-secondary" id="copy-number">
          <i class="fas fa-copy"></i> Copiar N√∫mero
        </button>
      </div>
    </div>
  </div>
</div>
<form id="emergencyFormspreeForm" action="https://formspree.io/f/xblzaejj" method="POST" style="display: none;">
  <input type="hidden" name="_subject" value="üö® ALERTA R√ÅPIDA - SAT Bolivia 2.0">
  <input type="hidden" name="tipo" value="EMERGENCIA CR√çTICA">
  <input type="hidden" name="gravedad" value="CRITICA">
  <input type="hidden" name="descripcion" value="üö® ALERTA: Situaci√≥n de emergencia que requiere intervenci√≥n inmediata de servicios de emergencia">
  <input type="hidden" name="ubicacion" id="formspreeUbicacion" value="">
  <input type="hidden" name="timestamp" id="formspreeTimestamp" value="">
  <input type="hidden" name="fuente" value="SAT Bolivia 2.0 Web App">
</form>
<button class="emergency-btn" title="Enviar alerta r√°pida de emergencia" aria-label="Bot√≥n de emergencia" onclick="mostrarAlertaRapida()">
  <i class="fas fa-exclamation-triangle"></i>
</button>
<div class="notification-toast" id="notificationToast">
  <div class="notification-title" id="toastTitle">√âxito</div>
  <div class="notification-message" id="toastMessage">Operaci√≥n completada correctamente</div>
</div>

<footer class="footer">
  <div class="footer-content">
    <p>¬© 2026 SAT Bolivia - Sistema de Alerta Temprana. Todos los derechos reservados.</p>
    <p>Desarrollado con <i class="fas fa-heart" style="color: var(--danger);"></i> para proteger a Bolivia</p>
  </div>
</footer>
<script>
class SistemaContactos {
  constructor() {
    this.departments = [];
    this.filters = {
      search: '',
      department: 'all',
      service: 'all'
    };
    this.currentOpenCard = null;
    this.currentService = null;
    this.currentNumber = null;
    this.inicializar();
  }

  inicializar() {
    this.cargarDepartamentos();
    this.configurarFiltros();
    this.configurarModal();
    this.configurarBotones();
    this.configurarQuickDial();
    this.renderizarDepartamentos();
    this.actualizarEstadisticas();
    this.actualizarFecha();
    this.configurarEventos();
  }

  configurarEventos() {
    window.addEventListener('scroll', () => {
      const header = document.getElementById('header');
      if (window.scrollY > 50) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
    });
    setInterval(() => this.actualizarFecha(), 60000);
  }

  cargarDepartamentos() {
    this.departments = [
      {
        id: 'la-paz',
        name: 'La Paz',
        flag: 'https://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Bandera_de_La_Paz.svg/1200px-Bandera_de_La_Paz.svg.png',
        contacts: [
          { service: 'Polic√≠a Departamental', number: '2280-2020', icon: 'üëÆ', type: 'policia' },
          { service: 'Bomberos La Paz', number: '231-119', icon: 'üöí', type: 'bomberos' },
          { service: 'Servicios de Emergencia', number: '800-100-100', icon: 'üõ°Ô∏è', type: 'servicios-emergencia' },
          { service: 'Hospital General', number: '220-1800', icon: 'üè•', type: 'hospital' },
          { service: 'Defensa Civil', number: '2280-1111', icon: 'üö®', type: 'servicios-emergencia' }
        ]
      },
      {
        id: 'santa-cruz',
        name: 'Santa Cruz',
        flag: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Bandera_de_Santa_Cruz_de_la_Sierra.svg/1200px-Bandera_de_Santa_Cruz_de_la_Sierra.svg.png',
        contacts: [
          { service: 'Polic√≠a Departamental', number: '336-6666', icon: 'üëÆ', type: 'policia' },
          { service: 'Bomberos SC', number: '333-119', icon: 'üöí', type: 'bomberos' },
          { service: 'Servicios de Emergencia', number: '800-100-200', icon: 'üõ°Ô∏è', type: 'servicios-emergencia' },
          { service: 'Hospital Japon√©s', number: '346-1000', icon: 'üè•', type: 'hospital' },
          { service: 'Cruz Roja', number: '334-1111', icon: 'üÜò', type: 'servicios-emergencia' }
        ]
      },
      {
        id: 'cochabamba',
        name: 'Cochabamba',
        flag: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/16/Bandera_de_Cochabamba.svg/1200px-Bandera_de_Cochabamba.svg.png',
        contacts: [
          { service: 'Polic√≠a Departamental', number: '422-2222', icon: 'üëÆ', type: 'policia' },
          { service: 'Bomberos CBBA', number: '422-119', icon: 'üöí', type: 'bomberos' },
          { service: 'Servicios de Emergencia', number: '800-100-300', icon: 'üõ°Ô∏è', type: 'servicios-emergencia' },
          { service: 'Hospital Viedma', number: '424-4444', icon: 'üè•', type: 'hospital' },
          { service: 'Protecci√≥n Civil', number: '422-3333', icon: 'üõ°Ô∏è', type: 'servicios-emergencia' }
        ]
      },
      {
        id: 'oruro',
        name: 'Oruro',
        flag: 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Bandera_de_Oruro.svg/1200px-Bandera_de_Oruro.svg.png',
        contacts: [
          { service: 'Polic√≠a Departamental', number: '527-7777', icon: 'üëÆ', type: 'policia' },
          { service: 'Bomberos Oruro', number: '527-119', icon: 'üöí', type: 'bomberos' },
          { service: 'Servicios de Emergencia', number: '800-100-400', icon: 'üõ°Ô∏è', type: 'servicios-emergencia' },
          { service: 'Hospital General', number: '527-8888', icon: 'üè•', type: 'hospital' }
        ]
      },
      {
        id: 'potosi',
        name: 'Potos√≠',
        flag: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/8e/Bandera_de_Potos%C3%AD.svg/1200px-Bandera_de_Potos%C3%AD.svg.png',
        contacts: [
          { service: 'Polic√≠a Departamental', number: '622-2222', icon: 'üëÆ', type: 'policia' },
          { service: 'Bomberos Potos√≠', number: '622-119', icon: 'üöí', type: 'bomberos' },
          { service: 'Servicios de Emergencia', number: '800-100-500', icon: 'üõ°Ô∏è', type: 'servicios-emergencia' },
          { service: 'Hospital Daniel Bracamonte', number: '622-3333', icon: 'üè•', type: 'hospital' }
        ]
      },
      {
        id: 'chuquisaca',
        name: 'Chuquisaca',
        flag: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/18/Bandera_de_Chuquisaca.svg/1200px-Bandera_de_Chuquisaca.svg.png',
        contacts: [
          { service: 'Polic√≠a Departamental', number: '464-4444', icon: 'üëÆ', type: 'policia' },
          { service: 'Bomberos Sucre', number: '464-119', icon: 'üöí', type: 'bomberos' },
          { service: 'Servicios de Emergencia', number: '800-100-600', icon: 'üõ°Ô∏è', type: 'servicios-emergencia' },
          { service: 'Hospital Santa B√°rbara', number: '464-5555', icon: 'üè•', type: 'hospital' }
        ]
      },
      {
        id: 'beni',
        name: 'Beni',
        flag: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Bandera_de_Beni.svg/1200px-Bandera_de_Beni.svg.png',
        contacts: [
          { service: 'Polic√≠a Departamental', number: '462-2222', icon: 'üëÆ', type: 'policia' },
          { service: 'Bomberos Beni', number: '462-119', icon: 'üöí', type: 'bomberos' },
          { service: 'Servicios de Emergencia', number: '800-100-700', icon: 'üõ°Ô∏è', type: 'servicios-emergencia' },
          { service: 'Hospital San Juan de Dios', number: '462-3333', icon: 'üè•', type: 'hospital' }
        ]
      },
      {
        id: 'pando',
        name: 'Pando',
        flag: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Bandera_de_Pando.svg/1200px-Bandera_de_Pando.svg.png',
        contacts: [
          { service: 'Polic√≠a Departamental', number: '842-2222', icon: 'üëÆ', type: 'policia' },
          { service: 'Bomberos Pando', number: '842-119', icon: 'üöí', type: 'bomberos' },
          { service: 'Servicios de Emergencia', number: '800-100-800', icon: 'üõ°Ô∏è', type: 'servicios-emergencia' },
          { service: 'Hospital Roberto Galindo', number: '842-3333', icon: 'üè•', type: 'hospital' }
        ]
      },
      {
        id: 'tarija',
        name: 'Tarija',
        flag: 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/Bandera_de_Tarija.svg/1200px-Bandera_de_Tarija.svg.png',
        contacts: [
          { service: 'Polic√≠a Departamental', number: '664-4444', icon: 'üëÆ', type: 'policia' },
          { service: 'Bomberos Tarija', number: '664-119', icon: 'üöí', type: 'bomberos' },
          { service: 'Servicios de Emergencia', number: '800-100-900', icon: 'üõ°Ô∏è', type: 'servicios-emergencia' },
          { service: 'Hospital Regional', number: '664-5555', icon: 'üè•', type: 'hospital' }
        ]
      }
    ];
  }

  configurarBotones() {
    document.getElementById('expand-all-btn').addEventListener('click', () => this.expandAllCards());
    document.getElementById('collapse-all-btn').addEventListener('click', () => this.collapseAllCards());
    document.getElementById('save-contacts-btn').addEventListener('click', () => this.saveContacts());
  }

  configurarQuickDial() {
    const quickDialItems = document.querySelectorAll('.quick-dial-item');
    quickDialItems.forEach(item => {
      item.addEventListener('click', () => {
        const service = item.getAttribute('data-service');
        const number = item.getAttribute('data-number');
        this.openCallModal(service, number);
      });
    });
  }

  actualizarEstadisticas() {
    const totalContacts = this.departments.reduce((sum, dept) => sum + dept.contacts.length, 0);
    const totalDepartments = this.departments.length;
    const emergencyServices = this.departments.reduce((sum, dept) => 
      sum + dept.contacts.filter(contact => contact.type === 'servicios-emergencia').length, 0
    );

    document.getElementById('total-contacts').textContent = totalContacts;
    document.getElementById('total-departments').textContent = totalDepartments;
    document.getElementById('emergency-services').textContent = emergencyServices;
  }

  actualizarFecha() {
    const now = new Date();
    const timeString = now.toLocaleTimeString('es-BO', {
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit'
    });
    const dateString = now.toLocaleDateString('es-BO', {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    });
    document.getElementById('lastUpdateTime').textContent = `${dateString} ${timeString}`;
  }

  configurarFiltros() {
    document.getElementById('search-input').addEventListener('input', (e) => {
      this.filters.search = e.target.value.toLowerCase();
      this.aplicarFiltros();
    });

    document.getElementById('department-filter').addEventListener('change', (e) => {
      this.filters.department = e.target.value;
      this.aplicarFiltros();
    });

    document.getElementById('service-filter').addEventListener('change', (e) => {
      this.filters.service = e.target.value;
      this.aplicarFiltros();
    });
  }

  configurarModal() {
    const modal = document.getElementById('call-modal');
    const closeBtn = document.getElementById('modal-close');
    const callBtn = document.getElementById('call-now');
    const copyBtn = document.getElementById('copy-number');

    closeBtn.addEventListener('click', () => this.cerrarModal());
    modal.addEventListener('click', (e) => {
      if (e.target === modal) this.cerrarModal();
    });

    callBtn.addEventListener('click', () => this.realizarLlamada());
    copyBtn.addEventListener('click', () => this.copiarNumero());

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') this.cerrarModal();
    });
  }

  aplicarFiltros() {
    const container = document.getElementById('contacts-container');
    const noResults = document.getElementById('noResults');
    let filteredDepartments = this.departments;

    if (this.filters.department !== 'all') {
      filteredDepartments = filteredDepartments.filter(dept => dept.id === this.filters.department);
    }

    if (this.filters.search) {
      filteredDepartments = filteredDepartments.filter(dept => 
        dept.name.toLowerCase().includes(this.filters.search) ||
        dept.contacts.some(contact => 
          contact.service.toLowerCase().includes(this.filters.search) ||
          contact.number.includes(this.filters.search)
        )
      );
    }

    if (this.filters.service !== 'all') {
      filteredDepartments = filteredDepartments.map(dept => ({
        ...dept,
        contacts: dept.contacts.filter(contact => contact.type === this.filters.service)
      })).filter(dept => dept.contacts.length > 0);
    }

    this.renderizarDepartamentosFiltrados(filteredDepartments);
    
    noResults.style.display = filteredDepartments.length === 0 ? 'block' : 'none';
  }

  renderizarDepartamentos() {
    this.renderizarDepartamentosFiltrados(this.departments);
  }

  renderizarDepartamentosFiltrados(departments) {
    const container = document.getElementById('contacts-container');
    
    container.innerHTML = departments.map(dept => this.crearTarjetaDepartamento(dept)).join('');
    
    this.configurarEventosTarjetas();
  }

  crearTarjetaDepartamento(department) {
    const contactCount = department.contacts.length;
    const isOpen = this.currentOpenCard === department.id;
    
    return `
      <div class="department-card ${isOpen ? 'active' : ''}" 
           data-department="${department.id}">
        <div class="card-header">
          <div class="flag-container">
            <img src="${department.flag}" alt="${department.name}" class="flag" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 70%22><rect width=%22100%22 height=%2270%22 fill=%22%2300B4D4%22 opacity=%220.2%22/><text x=%2250%22 y=%2235%22 font-family=%22Arial%22 font-size=%2220%22 fill=%22%2300B4D4%22 text-anchor=%22middle%22 alignment-baseline=%22middle%22>${department.name.charAt(0)}</text></svg>'">
          </div>
          <div class="department-info">
            <h3>${department.name}</h3>
            <div class="department-stats">
              <div class="stat"><i class="fas fa-phone"></i> ${contactCount} contactos</div>
              <div class="stat"><i class="fas fa-clock"></i> 24/7</div>
            </div>
          </div>
        </div>
        <div class="contact-info ${isOpen ? 'active' : ''}">
          ${department.contacts.map(contact => `
            <div class="contact-item">
              <div class="contact-icon">${contact.icon}</div>
              <div class="contact-details">
                <div class="contact-service">${contact.service}</div>
                <a href="tel:${contact.number}" class="contact-number" onclick="event.stopPropagation(); window.sistemaContactos.openCallModal('${contact.service}', '${contact.number}'); return false;">
                  ${contact.number}
                </a>
              </div>
              <div class="contact-actions">
                <button class="action-btn" onclick="event.stopPropagation(); window.sistemaContactos.openCallModal('${contact.service}', '${contact.number}')" title="Llamar">
                  <i class="fas fa-phone"></i>
                </button>
                <button class="action-btn" onclick="event.stopPropagation(); window.sistemaContactos.copiarNumero('${contact.number}')" title="Copiar n√∫mero">
                  <i class="fas fa-copy"></i>
                </button>
              </div>
            </div>
          `).join('')}
        </div>
      </div>
    `;
  }

  configurarEventosTarjetas() {
    const cards = document.querySelectorAll('.department-card');
    cards.forEach(card => {
      const header = card.querySelector('.card-header');
      header.addEventListener('click', () => {
        const departmentId = card.getAttribute('data-department');
        this.toggleInfo(departmentId);
      });
    });
  }

  toggleInfo(id) {
    const cards = document.querySelectorAll('.department-card');
    const targetCard = document.querySelector(`[data-department="${id}"]`);
    const targetInfo = targetCard?.querySelector('.contact-info');
    
    if (!targetCard || !targetInfo) return;
    
    if (this.currentOpenCard && this.currentOpenCard !== id) {
      const prevCard = document.querySelector(`[data-department="${this.currentOpenCard}"]`);
      const prevInfo = prevCard?.querySelector('.contact-info');
      if (prevInfo && prevCard) {
        prevInfo.classList.remove('active');
        prevCard.classList.remove('active');
      }
    }
    
    const isOpening = !targetInfo.classList.contains('active');
    targetInfo.classList.toggle('active');
    targetCard.classList.toggle('active');
    
    if (isOpening) {
      this.currentOpenCard = id;
    } else {
      this.currentOpenCard = null;
    }
  }

  openCallModal(service, number) {
    this.currentService = service;
    this.currentNumber = number;
    
    const modal = document.getElementById('call-modal');
    const title = document.getElementById('modal-title');
    const serviceElem = document.getElementById('modal-service');
    const numberElem = document.getElementById('modal-number');
    
    title.textContent = `Llamar a ${service}`;
    serviceElem.textContent = service;
    numberElem.textContent = number;
    
    modal.classList.add('active');
  }

  cerrarModal() {
    const modal = document.getElementById('call-modal');
    modal.classList.remove('active');
  }

  realizarLlamada() {
    if (this.currentNumber) {
      window.open(`tel:${this.currentNumber}`, '_self');
      this.mostrarNotificacion('üìû Llamando...', `Conectando con ${this.currentService}`);
      this.cerrarModal();
    }
  }

  copiarNumero(number = null) {
    const numeroACopiar = number || this.currentNumber;
    
    if (numeroACopiar) {
      navigator.clipboard.writeText(numeroACopiar).then(() => {
        this.mostrarNotificacion('‚úÖ Copiado', `N√∫mero ${numeroACopiar} copiado al portapapeles`);
        if (!number) this.cerrarModal();
      }).catch(() => {
        this.mostrarNotificacion('‚ùå Error', 'No se pudo copiar el n√∫mero');
      });
    }
  }

  expandAllCards() {
    const cards = document.querySelectorAll('.department-card');
    let expandedCount = 0;
    
    cards.forEach(card => {
      const info = card.querySelector('.contact-info');
      if (info && !info.classList.contains('active')) {
        info.classList.add('active');
        card.classList.add('active');
        expandedCount++;
      }
    });
    
    this.currentOpenCard = 'all';
    this.mostrarNotificacion('üìñ Expandido', `${expandedCount} departamentos expandidos`);
  }

  collapseAllCards() {
    const cards = document.querySelectorAll('.department-card');
    let collapsedCount = 0;
    
    cards.forEach(card => {
      const info = card.querySelector('.contact-info');
      if (info && info.classList.contains('active')) {
        info.classList.remove('active');
        card.classList.remove('active');
        collapsedCount++;
      }
    });
    
    this.currentOpenCard = null;
    this.mostrarNotificacion('üìï Contra√≠do', `${collapsedCount} departamentos contra√≠dos`);
  }

  saveContacts() {
    const todosLosContactos = {
      timestamp: new Date().toISOString(),
      fuente: "SAT Bolivia 2.0 - Contactos de Emergencia",
      departamentos: {}
    };
    
    this.departments.forEach(dept => {
      todosLosContactos.departamentos[dept.name] = dept.contacts.map(contact => ({
        servicio: contact.service,
        numero: contact.number,
        tipo: contact.type,
        icono: contact.icon
      }));
    });
  
    const datosJSON = JSON.stringify(todosLosContactos, null, 2);
    const blob = new Blob([datosJSON], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'contactos-emergencia-sat-bolivia.json';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    
    this.mostrarNotificacion('üíæ Guardado', 'Contactos descargados como JSON');
  }

  mostrarNotificacion(titulo, mensaje, duracion = 3000) {
    const toast = document.getElementById('notificationToast');
    const titleElem = document.getElementById('toastTitle');
    const messageElem = document.getElementById('toastMessage');
    
    titleElem.textContent = titulo;
    messageElem.textContent = mensaje;
    
    toast.classList.add('show');
    
    setTimeout(() => {
      toast.classList.remove('show');
    }, duracion);
  }
}
async function mostrarAlertaRapida() {
  const confirmar = confirm(
    'üö® ALERTA DE EMERGENCIA - SAT Bolivia 2.0\n\n' +
    '¬øEst√°s seguro de que quieres enviar una alerta de emergencia?\n\n' +
    'Esta alerta notificar√° inmediatamente a los servicios de emergencia.\n' +
    'Solo usa esta funci√≥n en caso de peligro real e inmediato.\n\n' +
    'Si es una emergencia m√©dica, llama al 118 directamente.'
  );
  
  if (!confirmar) return;
  
  const emergencyBtn = document.querySelector('.emergency-btn');
  const originalBackground = emergencyBtn.style.background;
  const originalText = emergencyBtn.innerHTML;
  
  emergencyBtn.style.background = 'linear-gradient(135deg, var(--warning), var(--warning-dark))';
  emergencyBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
  emergencyBtn.disabled = true;
  emergencyBtn.style.animation = 'none';
  
  try {
    const position = await obtenerUbicacion();
    
    const alertaData = {
      tipo: "EMERGENCIA_CRITICA",
      gravedad: "ROJO",
      descripcion: "üö® ALERTA R√ÅPIDA: Situaci√≥n de emergencia que requiere intervenci√≥n inmediata",
      timestamp: new Date().toISOString(),
      ubicacion: {
        lat: position.coords.latitude,
        lng: position.coords.longitude,
        precision: position.coords.accuracy
      },
      usuario: "Usuario SAT Contactos",
      fuente: "SAT Bolivia 2.0 - Sistema de Contactos"
    };
    
    await enviarAlertaFormspree(alertaData);
    
    setTimeout(() => {
      emergencyBtn.style.background = originalBackground;
      emergencyBtn.innerHTML = originalText;
      emergencyBtn.disabled = false;
      emergencyBtn.style.animation = 'emergencyPulse 2s infinite';
      
      if (window.sistemaContactos) {
        window.sistemaContactos.mostrarNotificacion(
          'üö® Alerta Enviada', 
          'La alerta ha sido enviada a los servicios de emergencia',
          5000
        );
      }
    }, 2000);
    
  } catch (error) {
    console.error('Error enviando alerta:', error);
    
    emergencyBtn.style.background = originalBackground;
    emergencyBtn.innerHTML = originalText;
    emergencyBtn.disabled = false;
    emergencyBtn.style.animation = 'emergencyPulse 2s infinite';
    
    if (window.sistemaContactos) {
      window.sistemaContactos.mostrarNotificacion(
        '‚ö†Ô∏è Ubicaci√≥n No Disponible', 
        'Para mayor precisi√≥n, activa el GPS y recarga la p√°gina',
        5000
      );
    }
  }
}

function obtenerUbicacion() {
  return new Promise((resolve, reject) => {
    if (!navigator.geolocation) {
      reject(new Error('Geolocalizaci√≥n no soportada'));
      return;
    }
    
    navigator.geolocation.getCurrentPosition(resolve, reject, {
      enableHighAccuracy: true,
      timeout: 10000,
      maximumAge: 0
    });
  });
}

async function enviarAlertaFormspree(alertaData) {
  return new Promise((resolve) => {
    try {
      document.getElementById('formspreeUbicacion').value = 
        `Lat: ${alertaData.ubicacion.lat}, Lon: ${alertaData.ubicacion.lng}, Precisi√≥n: ${alertaData.ubicacion.precision}m`;
      
      document.getElementById('formspreeTimestamp').value = alertaData.timestamp;

      const form = document.getElementById('emergencyFormspreeForm');
      const formData = new FormData(form);
      
      fetch(form.action, {
        method: 'POST',
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      })
      .then(response => {
        if (response.ok) {
          resolve({ exito: true });
        } else {
          resolve({ exito: false });
        }
      })
      .catch(error => {
        resolve({ exito: false, error: error.message });
      });
      
    } catch (error) {
      resolve({ exito: false, error: error.message });
    }
  });
}
document.addEventListener('DOMContentLoaded', function() {
  window.sistemaContactos = new SistemaContactos();
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
      }
    });
  }, observerOptions);
  const statCards = document.querySelectorAll('.stat-card');
  statCards.forEach((card, index) => {
    card.style.opacity = '0';
    card.style.transform = 'translateY(20px)';
    card.style.transition = `opacity 0.6s ease ${index * 0.1}s, transform 0.6s ease ${index * 0.1}s`;
    observer.observe(card);
  });
  const quickDialSection = document.querySelector('.quick-dial-section');
  if (quickDialSection) {
    quickDialSection.style.opacity = '0';
    quickDialSection.style.transform = 'translateY(30px)';
    quickDialSection.style.transition = 'opacity 0.6s ease 0.2s, transform 0.6s ease 0.2s';
    observer.observe(quickDialSection);
  }
  const controlsContainer = document.querySelector('.controls-container');
  if (controlsContainer) {
    controlsContainer.style.opacity = '0';
    controlsContainer.style.transform = 'translateY(30px)';
    controlsContainer.style.transition = 'opacity 0.6s ease 0.3s, transform 0.6s ease 0.3s';
    observer.observe(controlsContainer);
  }
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js').catch(err => {
        console.log('ServiceWorker registration failed: ', err);
      });
    });
  }
  window.addEventListener('online', () => {
    if (window.sistemaContactos) {
      window.sistemaContactos.mostrarNotificacion(
        '‚úÖ Conexi√≥n Restablecida', 
        'El sistema de contactos se ha reconectado',
        3000
      );
    }
  });
  
  window.addEventListener('offline', () => {
    if (window.sistemaContactos) {
      window.sistemaContactos.mostrarNotificacion(
        '‚ö†Ô∏è Sin Conexi√≥n', 
        'Los contactos est√°n disponibles localmente',
        5000
      );
    }
  });
  
  console.log('%cüìû Sistema de Contactos SAT Bolivia 2.0', 'font-size: 24px; font-weight: bold; color: #00B4D4;');
  console.log('%cContactos de emergencia oficiales', 'color: #80D0FF;');
});
</script>
</body>
</html>
